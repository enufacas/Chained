# ğŸ¤– AI-Powered Test Suite Generator with Edge Case Detection

**Created by @investigate-champion** with visionary analytical thinking inspired by Ada Lovelace.

## Overview

The AI Test Generator is an intelligent tool that automatically creates comprehensive test suites by analyzing code patterns, identifying edge cases, and generating test scenarios that catch boundary conditions and unexpected behaviors.

## Features

### 1. **Intelligent Code Analysis** ğŸ”
- Automatically discovers testable functions in Python files
- Extracts function signatures, parameters, and type annotations
- Analyzes docstrings and code structure
- Identifies dependencies and data flows

### 2. **Comprehensive Edge Case Detection** ğŸ¯
- **Boundary Conditions**: Empty inputs, maximum/minimum values, zero
- **Special Characters**: Unicode, symbols, whitespace-only strings
- **Type Edge Cases**: None/null values, type mismatches
- **Security Tests**: SQL injection, XSS attempts, malicious inputs
- **Performance Tests**: Very large inputs, nested structures
- **Special Values**: Infinity, NaN for floats

### 3. **Smart Test Generation** âœ¨
- Happy path tests with typical inputs
- Edge case tests for each parameter
- Proper test structure following project conventions
- Clear test names and documentation
- Executable test files with summary reporting

### 4. **Learning from Existing Tests** ğŸ“š
- Analyzes existing test patterns in the project
- Maintains consistency with project testing style
- Adapts to project-specific conventions

## Installation

No additional dependencies required! Uses only Python standard library.

```bash
# Make the script executable
chmod +x tools/ai_test_generator.py
```

## Usage

### Basic Usage

```bash
# Generate tests for a single file
python tools/ai_test_generator.py tools/code-analyzer.py

# Specify custom output location
python tools/ai_test_generator.py tools/code-analyzer.py tests/test_my_analyzer.py
```

### Advanced Usage

```python
from tools.ai_test_generator import AITestGenerator
from pathlib import Path

# Create generator
generator = AITestGenerator()

# Learn from existing tests
generator.learn_from_existing_tests(Path('tests'))

# Generate test suite
source_file = Path('tools/code-analyzer.py')
output_file = Path('tests/test_ai_gen_code_analyzer.py')
tests = generator.generate_test_suite(source_file, output_file)

print(f"Generated {len(tests)} test cases")
```

## Generated Test Structure

The AI Test Generator creates test files with this structure:

```python
#!/usr/bin/env python3
"""
AI-Generated Test Suite for [filename]

Generated by @investigate-champion's AI Test Generator

Includes:
- Happy path tests for typical inputs
- Boundary condition tests
- Special character tests
- Null/None handling tests
- Security-related input tests
"""

def run_all_tests():
    """Run all tests and report results."""
    # Test execution and reporting
    pass

# Test functions grouped by function under test
def test_function_name_happy_path():
    """Test with typical inputs."""
    pass

def test_function_name_param_empty_string():
    """Test with empty string edge case."""
    pass

# ... more tests ...

if __name__ == "__main__":
    success = run_all_tests()
    sys.exit(0 if success else 1)
```

## Edge Cases Detected

### String Parameters
- Empty string (`""`)
- Whitespace-only (`"   \t\n"`)
- Very long strings (10,000+ characters)
- Special characters (`!@#$%^&*()`)
- Unicode characters (`ä½ å¥½ä¸–ç•ŒğŸŒ`)
- SQL injection attempts (`'; DROP TABLE users--`)
- XSS attempts (`<script>alert("xss")</script>`)

### Numeric Parameters (int/float)
- Zero value
- Negative numbers
- Maximum/minimum values
- Infinity and negative infinity (float)
- NaN (Not a Number)

### Collection Parameters (list/dict)
- Empty collections
- Single-item collections
- Very large collections (100,000+ items)
- Nested structures

### Boolean Parameters
- True and False explicitly tested

### None/Null Handling
- None value for all parameters (unless explicitly Optional)

## Example Output

```
======================================================================
ğŸ¤– AI-Powered Test Suite Generator
   by @investigate-champion
======================================================================

Source file: tools/code-analyzer.py
Output file: tests/test_ai_gen_code_analyzer.py

ğŸ“š Learning from existing test patterns...
  âœ… Analyzed 85 test files

ğŸ” Analyzing code-analyzer.py...
  âœ… Found 5 testable functions
  âœ… Generated 23 test cases
  ğŸ“ Wrote test suite to tests/test_ai_gen_code_analyzer.py

======================================================================
âœ¨ Test Generation Complete!
======================================================================

Generated 23 test cases
Test file: tests/test_ai_gen_code_analyzer.py

To run the tests:
  python tests/test_ai_gen_code_analyzer.py
```

## Architecture

### Core Components

1. **EdgeCaseDetector**
   - Maintains patterns for different types
   - Generates appropriate edge cases based on parameter types
   - Categorizes edge cases (boundary, security, null, etc.)

2. **CodeAnalyzer**
   - Parses Python source files using AST
   - Extracts function metadata
   - Identifies testable functions

3. **AITestGenerator**
   - Orchestrates test generation
   - Creates test code with proper structure
   - Writes executable test files

### Data Flow

```
Source File
    â†“
CodeAnalyzer (AST parsing)
    â†“
TestableFunction objects
    â†“
EdgeCaseDetector (for each parameter)
    â†“
EdgeCase objects
    â†“
AITestGenerator (test code generation)
    â†“
GeneratedTest objects
    â†“
Test File (executable Python script)
```

## Integration with @investigate-champion

This tool embodies the @investigate-champion agent's approach:

- **Pattern Investigation**: Identifies patterns in code structure
- **Data Flow Analysis**: Traces parameters through functions
- **Systematic Analysis**: Methodically examines each testable function
- **Comprehensive Coverage**: Generates tests for all edge cases
- **Clear Documentation**: Documents rationale and expectations

## Best Practices

### When to Use

âœ… **Good use cases:**
- New utility functions without tests
- Refactored code needing updated tests
- Libraries with insufficient edge case coverage
- Functions with complex parameter combinations

âŒ **Not ideal for:**
- Functions with complex state dependencies
- Functions requiring mocking/stubbing
- Integration tests requiring external services
- UI/visual tests

### Customization

The generated tests are a starting point. You should:

1. Review generated tests for correctness
2. Add domain-specific test cases
3. Adjust edge case handling based on requirements
4. Add integration tests as needed
5. Enhance assertions with specific expectations

## Example: Generating Tests for a Tool

```bash
# Generate tests for the code analyzer
python tools/ai_test_generator.py tools/code-analyzer.py

# Run the generated tests
python tests/test_ai_gen_code_analyzer.py
```

Output:
```
======================================================================
ğŸ§ª AI-Generated Test Suite for code-analyzer.py
   Generated by @investigate-champion
======================================================================

ğŸ“‹ Testing function: analyze_code
----------------------------------------------------------------------
  âœ… test_analyze_code_happy_path: PASSED
  âœ… test_analyze_code_file_path_empty_string: PASSED
  âœ… test_analyze_code_file_path_whitespace_only: PASSED
  âœ… test_analyze_code_file_path_very_long_string: PASSED

ğŸ“‹ Testing function: extract_patterns
----------------------------------------------------------------------
  âœ… test_extract_patterns_happy_path: PASSED
  âœ… test_extract_patterns_text_empty_string: PASSED
  âœ… test_extract_patterns_text_special_characters: PASSED

======================================================================
ğŸ“Š Test Summary
======================================================================
Total tests: 7
Passed: 7 âœ…
Failed: 0 âŒ
Success rate: 100.0%
```

## Future Enhancements

- [ ] Support for more parameter types (sets, tuples, etc.)
- [ ] Integration with pytest and unittest frameworks
- [ ] Mock generation for dependencies
- [ ] Coverage analysis integration
- [ ] ML-based prediction of likely failures
- [ ] Mutation testing integration
- [ ] Property-based testing generation

## Contributing

To enhance the AI Test Generator:

1. Add new edge case patterns in `EdgeCaseDetector`
2. Extend type detection in `CodeAnalyzer`
3. Improve test code generation templates
4. Add support for new testing frameworks

## License

Part of the Chained autonomous AI ecosystem. See main repository LICENSE.

---

**@investigate-champion**: *"The best tests are those that find bugs before users do. Let's systematically explore every edge case!"* ğŸ¯

---

*Created with analytical rigor and visionary thinking, inspired by Ada Lovelace's pioneering spirit.*
